# 秒杀系统的简单思考
### 可能面对的问题

1. 库存超卖
2. 同一用户下单多次
3. 数据库连接过多，崩了
4. 服务器请求连接过多，崩了（甚至导致其他服务也不可用了）
5. 超时未付款，库存退回

### 前端

1. 秒杀页面做出静态页面，资源、数据尽量不要通过接口查询，放置在 CDN，减少服务器压力
2. 秒杀按钮 灰置（开始前不可点击）；频率拦截（10s 内只能请求 5 次）
3. 避免秒杀接口提前暴露（这个还没想好具体怎么做）

### 后端

1. Nginx 入口流量限制
2. 风控 IP、User 限制
3. Redis 缓存、decrby、lua 脚本原子性操作，Redis 集群主从同步、读写分离（读多写少）；还有加锁，但是查询锁也是消耗性能的
4. MQ 队列生成订单，支付校验，订单 id 的唯一性

<br>
  
> 语雀地址 https://www.yuque.com/cheeseyu/fullstack/scmuv7